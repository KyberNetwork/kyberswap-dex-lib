package maverickv2

import (
	"math/big"
	"testing"

	"github.com/KyberNetwork/kyberswap-dex-lib/pkg/entity"
	"github.com/KyberNetwork/kyberswap-dex-lib/pkg/source/pool"
	"github.com/KyberNetwork/kyberswap-dex-lib/pkg/util/bignumber"
	"github.com/goccy/go-json"
	"github.com/stretchr/testify/assert"
)

func TestUpdateBalance(t *testing.T) {
	poolStr := `{"address":"0x6efad5f7ec1d267c66b1b582b89b2ec32a36d57a","exchange":"maverick-v2","type":"maverick-v2","timestamp":1766738263,"reserves":["18914","1349470956508981331"],"tokens":[{"address":"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48","symbol":"USDC","decimals":6,"swappable":true},{"address":"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2","symbol":"WETH","decimals":18,"swappable":true}],"extra":"{\"feeAIn\":200000000000000,\"feeBIn\":200000000000000,\"protocolFeeRatio\":0,\"bins\":{\"1\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"3818435332314467819\",\"kind\":0,\"tick\":409,\"tickBalance\":\"1909770205624759311\"},\"10\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":402,\"tickBalance\":\"100000000\"},\"100\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":358,\"tickBalance\":\"100000000\"},\"101\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":447,\"tickBalance\":\"100000000\"},\"102\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":523,\"tickBalance\":\"100000000\"},\"103\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":524,\"tickBalance\":\"100000000\"},\"104\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":448,\"tickBalance\":\"100000000\"},\"105\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":449,\"tickBalance\":\"100000000\"},\"106\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":450,\"tickBalance\":\"100000000\"},\"107\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":451,\"tickBalance\":\"100000000\"},\"108\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":452,\"tickBalance\":\"100000000\"},\"109\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":453,\"tickBalance\":\"100000000\"},\"11\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":403,\"tickBalance\":\"100000000\"},\"110\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":454,\"tickBalance\":\"100000000\"},\"111\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":455,\"tickBalance\":\"100000000\"},\"112\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":456,\"tickBalance\":\"100000000\"},\"113\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":457,\"tickBalance\":\"100000000\"},\"114\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":458,\"tickBalance\":\"100000000\"},\"115\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":461,\"tickBalance\":\"100000000\"},\"116\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":462,\"tickBalance\":\"100000000\"},\"117\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":463,\"tickBalance\":\"100000000\"},\"118\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":464,\"tickBalance\":\"100000000\"},\"119\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":465,\"tickBalance\":\"100000000\"},\"12\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":404,\"tickBalance\":\"100000000\"},\"120\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":466,\"tickBalance\":\"100000000\"},\"121\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":467,\"tickBalance\":\"100000000\"},\"122\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":468,\"tickBalance\":\"100000000\"},\"123\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":469,\"tickBalance\":\"100000000\"},\"124\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":470,\"tickBalance\":\"100000000\"},\"125\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":471,\"tickBalance\":\"100000000\"},\"126\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":472,\"tickBalance\":\"100000000\"},\"127\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":473,\"tickBalance\":\"100000000\"},\"128\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":474,\"tickBalance\":\"100000000\"},\"129\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":475,\"tickBalance\":\"100000000\"},\"13\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":405,\"tickBalance\":\"100000000\"},\"130\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":476,\"tickBalance\":\"100000000\"},\"131\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":477,\"tickBalance\":\"100000000\"},\"132\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":478,\"tickBalance\":\"100000000\"},\"133\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":479,\"tickBalance\":\"100000000\"},\"134\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":480,\"tickBalance\":\"100000000\"},\"135\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":481,\"tickBalance\":\"100000000\"},\"136\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":482,\"tickBalance\":\"100000000\"},\"137\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":483,\"tickBalance\":\"100000000\"},\"138\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":484,\"tickBalance\":\"100000000\"},\"139\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"161061198914485240\",\"kind\":3,\"tick\":407,\"tickBalance\":\"79360240711295901\"},\"14\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":406,\"tickBalance\":\"100000000\"},\"140\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":224,\"tickBalance\":\"100000000\"},\"141\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":223,\"tickBalance\":\"100000000\"},\"142\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":219,\"tickBalance\":\"100000000\"},\"143\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":213,\"tickBalance\":\"100000000\"},\"144\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":209,\"tickBalance\":\"100000000\"},\"145\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":211,\"tickBalance\":\"100000000\"},\"146\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":214,\"tickBalance\":\"100000000\"},\"147\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":212,\"tickBalance\":\"100000000\"},\"148\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":206,\"tickBalance\":\"100000000\"},\"15\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"2787785362982493105\",\"kind\":0,\"tick\":416,\"tickBalance\":\"2787785362882493105\"},\"16\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"2787785362982432679\",\"kind\":0,\"tick\":417,\"tickBalance\":\"2787785362882432679\"},\"17\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"2787785362982494827\",\"kind\":0,\"tick\":418,\"tickBalance\":\"2787785362882494827\"},\"18\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"2787785362982494797\",\"kind\":0,\"tick\":419,\"tickBalance\":\"2787785362882494797\"},\"19\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"2787785362982495363\",\"kind\":0,\"tick\":420,\"tickBalance\":\"2787785362882495363\"},\"2\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"1909925011019307318\",\"kind\":0,\"tick\":407,\"tickBalance\":\"1909925010915311313\"},\"20\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"2787785362982464842\",\"kind\":0,\"tick\":421,\"tickBalance\":\"2787785362882464842\"},\"21\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"2787785362982497052\",\"kind\":0,\"tick\":422,\"tickBalance\":\"2787785362882497052\"},\"22\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"2787785362982465415\",\"kind\":0,\"tick\":423,\"tickBalance\":\"2787785362882465415\"},\"23\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"2787785362982465466\",\"kind\":0,\"tick\":424,\"tickBalance\":\"2787785362882465466\"},\"24\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"2787785362982532120\",\"kind\":0,\"tick\":425,\"tickBalance\":\"2787785362882532120\"},\"25\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"2787785362982465987\",\"kind\":0,\"tick\":426,\"tickBalance\":\"2787785362882465987\"},\"26\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"2787785362982466017\",\"kind\":0,\"tick\":427,\"tickBalance\":\"2787785362882466018\"},\"27\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"2787785362982501057\",\"kind\":0,\"tick\":428,\"tickBalance\":\"2787785362882501057\"},\"28\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"2787785362982467107\",\"kind\":0,\"tick\":429,\"tickBalance\":\"2787785362882467107\"},\"29\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"2787785362982467688\",\"kind\":0,\"tick\":430,\"tickBalance\":\"2787785362882467688\"},\"3\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"1909925025529731625\",\"kind\":0,\"tick\":408,\"tickBalance\":\"1909925025425735620\"},\"30\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"2787785362982467718\",\"kind\":0,\"tick\":431,\"tickBalance\":\"2787785362882467718\"},\"31\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"2787785362982467675\",\"kind\":0,\"tick\":432,\"tickBalance\":\"2787785362882467675\"},\"32\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"2787785362982540030\",\"kind\":0,\"tick\":433,\"tickBalance\":\"2787785362882540030\"},\"33\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"2793360933708234098\",\"kind\":0,\"tick\":434,\"tickBalance\":\"2793360933608234098\"},\"34\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"2798936504433998860\",\"kind\":0,\"tick\":435,\"tickBalance\":\"2798936504333998860\"},\"35\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"2776634221530976588\",\"kind\":0,\"tick\":436,\"tickBalance\":\"2776634221430976588\"},\"36\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"2776634221530976622\",\"kind\":0,\"tick\":437,\"tickBalance\":\"2776634221430976622\"},\"37\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"2776634221530940423\",\"kind\":0,\"tick\":438,\"tickBalance\":\"2776634221430940423\"},\"38\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"2765483080079411491\",\"kind\":0,\"tick\":439,\"tickBalance\":\"2765483079979411491\"},\"39\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"2765483080079448834\",\"kind\":0,\"tick\":440,\"tickBalance\":\"2765483079979448834\"},\"4\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"1909925036671788739\",\"kind\":0,\"tick\":410,\"tickBalance\":\"1909925036567792734\"},\"40\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":526,\"tickBalance\":\"100000000\"},\"41\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":527,\"tickBalance\":\"100000000\"},\"42\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":385,\"tickBalance\":\"100000000\"},\"43\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":386,\"tickBalance\":\"100000000\"},\"44\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":387,\"tickBalance\":\"100000000\"},\"45\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":388,\"tickBalance\":\"100000000\"},\"46\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":389,\"tickBalance\":\"100000000\"},\"47\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":390,\"tickBalance\":\"100000000\"},\"48\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":391,\"tickBalance\":\"100000000\"},\"49\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":392,\"tickBalance\":\"100000000\"},\"5\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"1909925036671788382\",\"kind\":0,\"tick\":411,\"tickBalance\":\"1909925036567792377\"},\"50\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":393,\"tickBalance\":\"100000000\"},\"51\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":394,\"tickBalance\":\"100000000\"},\"52\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":395,\"tickBalance\":\"100000000\"},\"53\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":396,\"tickBalance\":\"100000000\"},\"54\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":397,\"tickBalance\":\"100000000\"},\"55\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":398,\"tickBalance\":\"100000000\"},\"56\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":399,\"tickBalance\":\"100000000\"},\"57\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":400,\"tickBalance\":\"100000000\"},\"58\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":401,\"tickBalance\":\"100000000\"},\"59\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":327,\"tickBalance\":\"100000000\"},\"6\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"1909925036671828084\",\"kind\":0,\"tick\":412,\"tickBalance\":\"1909925036567832079\"},\"60\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":384,\"tickBalance\":\"100000000\"},\"61\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":380,\"tickBalance\":\"100000000\"},\"62\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":381,\"tickBalance\":\"100000000\"},\"63\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":382,\"tickBalance\":\"100000000\"},\"64\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":383,\"tickBalance\":\"100000000\"},\"65\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":441,\"tickBalance\":\"100000000\"},\"66\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":442,\"tickBalance\":\"100000000\"},\"67\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":443,\"tickBalance\":\"100000000\"},\"68\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":444,\"tickBalance\":\"100000000\"},\"69\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":445,\"tickBalance\":\"100000000\"},\"7\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"1909925036671788373\",\"kind\":0,\"tick\":413,\"tickBalance\":\"1909925036567792368\"},\"70\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":446,\"tickBalance\":\"100000000\"},\"71\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":359,\"tickBalance\":\"100000000\"},\"72\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":360,\"tickBalance\":\"100000000\"},\"73\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":361,\"tickBalance\":\"100000000\"},\"74\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":362,\"tickBalance\":\"100000000\"},\"75\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":363,\"tickBalance\":\"100000000\"},\"76\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":364,\"tickBalance\":\"100000000\"},\"77\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":365,\"tickBalance\":\"100000000\"},\"78\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":366,\"tickBalance\":\"100000000\"},\"79\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":367,\"tickBalance\":\"100000000\"},\"8\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"1909925036671828687\",\"kind\":0,\"tick\":414,\"tickBalance\":\"1909925036567832682\"},\"80\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":368,\"tickBalance\":\"100000000\"},\"81\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":369,\"tickBalance\":\"100000000\"},\"82\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":370,\"tickBalance\":\"100000000\"},\"83\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":371,\"tickBalance\":\"100000000\"},\"84\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":372,\"tickBalance\":\"100000000\"},\"85\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":373,\"tickBalance\":\"100000000\"},\"86\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":374,\"tickBalance\":\"100000000\"},\"87\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":375,\"tickBalance\":\"100000000\"},\"88\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":376,\"tickBalance\":\"100000000\"},\"89\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":377,\"tickBalance\":\"100000000\"},\"9\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"1909925036671829261\",\"kind\":0,\"tick\":415,\"tickBalance\":\"1909925036567833256\"},\"90\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":378,\"tickBalance\":\"100000000\"},\"91\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":379,\"tickBalance\":\"100000000\"},\"92\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":459,\"tickBalance\":\"100000000\"},\"93\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":460,\"tickBalance\":\"100000000\"},\"94\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":352,\"tickBalance\":\"100000000\"},\"95\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":353,\"tickBalance\":\"100000000\"},\"96\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":354,\"tickBalance\":\"100000000\"},\"97\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":355,\"tickBalance\":\"100000000\"},\"98\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":356,\"tickBalance\":\"100000000\"},\"99\":{\"mergeBinBalance\":\"0\",\"mergeId\":0,\"totalSupply\":\"100000000\",\"kind\":0,\"tick\":357,\"tickBalance\":\"100000000\"}},\"ticks\":{\"206\":{\"ReserveA\":\"768555202\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":148,\"1\":0,\"2\":0,\"3\":0}},\"209\":{\"ReserveA\":\"793590306\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":144,\"1\":0,\"2\":0,\"3\":0}},\"211\":{\"ReserveA\":\"809459287\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":145,\"1\":0,\"2\":0,\"3\":0}},\"212\":{\"ReserveA\":\"817512420\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":147,\"1\":0,\"2\":0,\"3\":0}},\"213\":{\"ReserveA\":\"825645575\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":143,\"1\":0,\"2\":0,\"3\":0}},\"214\":{\"ReserveA\":\"833859455\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":146,\"1\":0,\"2\":0,\"3\":0}},\"219\":{\"ReserveA\":\"876172119\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":142,\"1\":0,\"2\":0,\"3\":0}},\"223\":{\"ReserveA\":\"911562954\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":141,\"1\":0,\"2\":0,\"3\":0}},\"224\":{\"ReserveA\":\"920631747\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":140,\"1\":0,\"2\":0,\"3\":0}},\"327\":{\"ReserveA\":\"2553147865\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":59,\"1\":0,\"2\":0,\"3\":0}},\"352\":{\"ReserveA\":\"3268864307\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":94,\"1\":0,\"2\":0,\"3\":0}},\"353\":{\"ReserveA\":\"3301386977\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":95,\"1\":0,\"2\":0,\"3\":0}},\"354\":{\"ReserveA\":\"3334230709\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":96,\"1\":0,\"2\":0,\"3\":0}},\"355\":{\"ReserveA\":\"3367400749\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":97,\"1\":0,\"2\":0,\"3\":0}},\"356\":{\"ReserveA\":\"3400902506\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":98,\"1\":0,\"2\":0,\"3\":0}},\"357\":{\"ReserveA\":\"3434738007\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":99,\"1\":0,\"2\":0,\"3\":0}},\"358\":{\"ReserveA\":\"3468909170\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":100,\"1\":0,\"2\":0,\"3\":0}},\"359\":{\"ReserveA\":\"3503419035\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":71,\"1\":0,\"2\":0,\"3\":0}},\"360\":{\"ReserveA\":\"3538275651\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":72,\"1\":0,\"2\":0,\"3\":0}},\"361\":{\"ReserveA\":\"3574891865\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":73,\"1\":0,\"2\":0,\"3\":0}},\"362\":{\"ReserveA\":\"3610472159\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":74,\"1\":0,\"2\":0,\"3\":0}},\"363\":{\"ReserveA\":\"3646390559\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":75,\"1\":0,\"2\":0,\"3\":0}},\"364\":{\"ReserveA\":\"3682669597\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":76,\"1\":0,\"2\":0,\"3\":0}},\"365\":{\"ReserveA\":\"3719308355\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":77,\"1\":0,\"2\":0,\"3\":0}},\"366\":{\"ReserveA\":\"3756306959\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":78,\"1\":0,\"2\":0,\"3\":0}},\"367\":{\"ReserveA\":\"3793676828\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":79,\"1\":0,\"2\":0,\"3\":0}},\"368\":{\"ReserveA\":\"3831421167\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":80,\"1\":0,\"2\":0,\"3\":0}},\"369\":{\"ReserveA\":\"3869538620\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":81,\"1\":0,\"2\":0,\"3\":0}},\"370\":{\"ReserveA\":\"3908036629\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":82,\"1\":0,\"2\":0,\"3\":0}},\"371\":{\"ReserveA\":\"3946916672\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":83,\"1\":0,\"2\":0,\"3\":0}},\"372\":{\"ReserveA\":\"3986181637\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":84,\"1\":0,\"2\":0,\"3\":0}},\"373\":{\"ReserveA\":\"4026519743\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":85,\"1\":0,\"2\":0,\"3\":0}},\"374\":{\"ReserveA\":\"4067518180\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":86,\"1\":0,\"2\":0,\"3\":0}},\"375\":{\"ReserveA\":\"4107983897\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":87,\"1\":0,\"2\":0,\"3\":0}},\"376\":{\"ReserveA\":\"4148856179\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":88,\"1\":0,\"2\":0,\"3\":0}},\"377\":{\"ReserveA\":\"4191791063\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":89,\"1\":0,\"2\":0,\"3\":0}},\"378\":{\"ReserveA\":\"4235190320\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":90,\"1\":0,\"2\":0,\"3\":0}},\"379\":{\"ReserveA\":\"4277343752\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":91,\"1\":0,\"2\":0,\"3\":0}},\"380\":{\"ReserveA\":\"4319895362\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":61,\"1\":0,\"2\":0,\"3\":0}},\"381\":{\"ReserveA\":\"4364601464\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":62,\"1\":0,\"2\":0,\"3\":0}},\"382\":{\"ReserveA\":\"4408899271\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":63,\"1\":0,\"2\":0,\"3\":0}},\"383\":{\"ReserveA\":\"4453681886\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":64,\"1\":0,\"2\":0,\"3\":0}},\"384\":{\"ReserveA\":\"4497990570\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":60,\"1\":0,\"2\":0,\"3\":0}},\"385\":{\"ReserveA\":\"4544559514\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":42,\"1\":0,\"2\":0,\"3\":0}},\"386\":{\"ReserveA\":\"4589770831\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":43,\"1\":0,\"2\":0,\"3\":0}},\"387\":{\"ReserveA\":\"4636796808\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":44,\"1\":0,\"2\":0,\"3\":0}},\"388\":{\"ReserveA\":\"4684113639\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":45,\"1\":0,\"2\":0,\"3\":0}},\"389\":{\"ReserveA\":\"4731913489\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":46,\"1\":0,\"2\":0,\"3\":0}},\"390\":{\"ReserveA\":\"4779533193\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":47,\"1\":0,\"2\":0,\"3\":0}},\"391\":{\"ReserveA\":\"4828469640\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":48,\"1\":0,\"2\":0,\"3\":0}},\"392\":{\"ReserveA\":\"4876508188\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":49,\"1\":0,\"2\":0,\"3\":0}},\"393\":{\"ReserveA\":\"4927372318\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":50,\"1\":0,\"2\":0,\"3\":0}},\"394\":{\"ReserveA\":\"4978007398\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":51,\"1\":0,\"2\":0,\"3\":0}},\"395\":{\"ReserveA\":\"5028797955\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":52,\"1\":0,\"2\":0,\"3\":0}},\"396\":{\"ReserveA\":\"5079583083\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":53,\"1\":0,\"2\":0,\"3\":0}},\"397\":{\"ReserveA\":\"5130116155\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":54,\"1\":0,\"2\":0,\"3\":0}},\"398\":{\"ReserveA\":\"5181149202\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":55,\"1\":0,\"2\":0,\"3\":0}},\"399\":{\"ReserveA\":\"5235857653\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":56,\"1\":0,\"2\":0,\"3\":0}},\"400\":{\"ReserveA\":\"5292160560\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":57,\"1\":0,\"2\":0,\"3\":0}},\"401\":{\"ReserveA\":\"5351246034\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":58,\"1\":0,\"2\":0,\"3\":0}},\"402\":{\"ReserveA\":\"5412645357\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":10,\"1\":0,\"2\":0,\"3\":0}},\"403\":{\"ReserveA\":\"5467699504\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":11,\"1\":0,\"2\":0,\"3\":0}},\"404\":{\"ReserveA\":\"5520300855\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":12,\"1\":0,\"2\":0,\"3\":0}},\"405\":{\"ReserveA\":\"5577353727\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":13,\"1\":0,\"2\":0,\"3\":0}},\"406\":{\"ReserveA\":\"5637425463\",\"ReserveB\":\"0\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":14,\"1\":0,\"2\":0,\"3\":0}},\"407\":{\"ReserveA\":\"464100606195877\",\"ReserveB\":\"36219557342339086\",\"TotalSupply\":\"1989285251626607214\",\"BinIdsByTick\":{\"0\":2,\"1\":0,\"2\":0,\"3\":139}},\"408\":{\"ReserveA\":\"0\",\"ReserveB\":\"34244172396305693\",\"TotalSupply\":\"1909925025425735620\",\"BinIdsByTick\":{\"0\":3,\"1\":0,\"2\":0,\"3\":0}},\"409\":{\"ReserveA\":\"0\",\"ReserveB\":\"34140245285229131\",\"TotalSupply\":\"1909770205624759311\",\"BinIdsByTick\":{\"0\":1,\"1\":0,\"2\":0,\"3\":0}},\"410\":{\"ReserveA\":\"0\",\"ReserveB\":\"33812014721303813\",\"TotalSupply\":\"1909925036567792734\",\"BinIdsByTick\":{\"0\":4,\"1\":0,\"2\":0,\"3\":0}},\"411\":{\"ReserveA\":\"0\",\"ReserveB\":\"33534936069573585\",\"TotalSupply\":\"1909925036567792377\",\"BinIdsByTick\":{\"0\":5,\"1\":0,\"2\":0,\"3\":0}},\"412\":{\"ReserveA\":\"0\",\"ReserveB\":\"33365790415388679\",\"TotalSupply\":\"1909925036567832079\",\"BinIdsByTick\":{\"0\":6,\"1\":0,\"2\":0,\"3\":0}},\"413\":{\"ReserveA\":\"0\",\"ReserveB\":\"33011523506130553\",\"TotalSupply\":\"1909925036567792368\",\"BinIdsByTick\":{\"0\":7,\"1\":0,\"2\":0,\"3\":0}},\"414\":{\"ReserveA\":\"0\",\"ReserveB\":\"32753233894344726\",\"TotalSupply\":\"1909925036567832682\",\"BinIdsByTick\":{\"0\":8,\"1\":0,\"2\":0,\"3\":0}},\"415\":{\"ReserveA\":\"0\",\"ReserveB\":\"32435922182407451\",\"TotalSupply\":\"1909925036567833256\",\"BinIdsByTick\":{\"0\":9,\"1\":0,\"2\":0,\"3\":0}},\"416\":{\"ReserveA\":\"0\",\"ReserveB\":\"47011531179923665\",\"TotalSupply\":\"2787785362882493105\",\"BinIdsByTick\":{\"0\":15,\"1\":0,\"2\":0,\"3\":0}},\"417\":{\"ReserveA\":\"0\",\"ReserveB\":\"47009970689789980\",\"TotalSupply\":\"2787785362882432679\",\"BinIdsByTick\":{\"0\":16,\"1\":0,\"2\":0,\"3\":0}},\"418\":{\"ReserveA\":\"0\",\"ReserveB\":\"46741099763700591\",\"TotalSupply\":\"2787785362882494827\",\"BinIdsByTick\":{\"0\":17,\"1\":0,\"2\":0,\"3\":0}},\"419\":{\"ReserveA\":\"0\",\"ReserveB\":\"46235758600983143\",\"TotalSupply\":\"2787785362882494797\",\"BinIdsByTick\":{\"0\":18,\"1\":0,\"2\":0,\"3\":0}},\"420\":{\"ReserveA\":\"0\",\"ReserveB\":\"46511171694898302\",\"TotalSupply\":\"2787785362882495363\",\"BinIdsByTick\":{\"0\":19,\"1\":0,\"2\":0,\"3\":0}},\"421\":{\"ReserveA\":\"0\",\"ReserveB\":\"46517778253655630\",\"TotalSupply\":\"2787785362882464842\",\"BinIdsByTick\":{\"0\":20,\"1\":0,\"2\":0,\"3\":0}},\"422\":{\"ReserveA\":\"0\",\"ReserveB\":\"47360908359967474\",\"TotalSupply\":\"2787785362882497052\",\"BinIdsByTick\":{\"0\":21,\"1\":0,\"2\":0,\"3\":0}},\"423\":{\"ReserveA\":\"0\",\"ReserveB\":\"47324986158950810\",\"TotalSupply\":\"2787785362882465415\",\"BinIdsByTick\":{\"0\":22,\"1\":0,\"2\":0,\"3\":0}},\"424\":{\"ReserveA\":\"0\",\"ReserveB\":\"46560788741816978\",\"TotalSupply\":\"2787785362882465466\",\"BinIdsByTick\":{\"0\":23,\"1\":0,\"2\":0,\"3\":0}},\"425\":{\"ReserveA\":\"0\",\"ReserveB\":\"45347876811245432\",\"TotalSupply\":\"2787785362882532120\",\"BinIdsByTick\":{\"0\":24,\"1\":0,\"2\":0,\"3\":0}},\"426\":{\"ReserveA\":\"0\",\"ReserveB\":\"43637282226910079\",\"TotalSupply\":\"2787785362882465987\",\"BinIdsByTick\":{\"0\":25,\"1\":0,\"2\":0,\"3\":0}},\"427\":{\"ReserveA\":\"0\",\"ReserveB\":\"42618667490667611\",\"TotalSupply\":\"2787785362882466018\",\"BinIdsByTick\":{\"0\":26,\"1\":0,\"2\":0,\"3\":0}},\"428\":{\"ReserveA\":\"0\",\"ReserveB\":\"40943870774727427\",\"TotalSupply\":\"2787785362882501057\",\"BinIdsByTick\":{\"0\":27,\"1\":0,\"2\":0,\"3\":0}},\"429\":{\"ReserveA\":\"0\",\"ReserveB\":\"40203805289567810\",\"TotalSupply\":\"2787785362882467107\",\"BinIdsByTick\":{\"0\":28,\"1\":0,\"2\":0,\"3\":0}},\"430\":{\"ReserveA\":\"0\",\"ReserveB\":\"39541243044422581\",\"TotalSupply\":\"2787785362882467688\",\"BinIdsByTick\":{\"0\":29,\"1\":0,\"2\":0,\"3\":0}},\"431\":{\"ReserveA\":\"0\",\"ReserveB\":\"39097046849061236\",\"TotalSupply\":\"2787785362882467718\",\"BinIdsByTick\":{\"0\":30,\"1\":0,\"2\":0,\"3\":0}},\"432\":{\"ReserveA\":\"0\",\"ReserveB\":\"38700908754956485\",\"TotalSupply\":\"2787785362882467675\",\"BinIdsByTick\":{\"0\":31,\"1\":0,\"2\":0,\"3\":0}},\"433\":{\"ReserveA\":\"0\",\"ReserveB\":\"38302871760395781\",\"TotalSupply\":\"2787785362882540030\",\"BinIdsByTick\":{\"0\":32,\"1\":0,\"2\":0,\"3\":0}},\"434\":{\"ReserveA\":\"0\",\"ReserveB\":\"37940285816178373\",\"TotalSupply\":\"2793360933608234098\",\"BinIdsByTick\":{\"0\":33,\"1\":0,\"2\":0,\"3\":0}},\"435\":{\"ReserveA\":\"0\",\"ReserveB\":\"37622839668927329\",\"TotalSupply\":\"2798936504333998860\",\"BinIdsByTick\":{\"0\":34,\"1\":0,\"2\":0,\"3\":0}},\"436\":{\"ReserveA\":\"0\",\"ReserveB\":\"36954885018188844\",\"TotalSupply\":\"2776634221430976588\",\"BinIdsByTick\":{\"0\":35,\"1\":0,\"2\":0,\"3\":0}},\"437\":{\"ReserveA\":\"0\",\"ReserveB\":\"36576748614848587\",\"TotalSupply\":\"2776634221430976622\",\"BinIdsByTick\":{\"0\":36,\"1\":0,\"2\":0,\"3\":0}},\"438\":{\"ReserveA\":\"0\",\"ReserveB\":\"36198082030573011\",\"TotalSupply\":\"2776634221430940423\",\"BinIdsByTick\":{\"0\":37,\"1\":0,\"2\":0,\"3\":0}},\"439\":{\"ReserveA\":\"0\",\"ReserveB\":\"35684944190937826\",\"TotalSupply\":\"2765483079979411491\",\"BinIdsByTick\":{\"0\":38,\"1\":0,\"2\":0,\"3\":0}},\"440\":{\"ReserveA\":\"0\",\"ReserveB\":\"35308208863356602\",\"TotalSupply\":\"2765483079979448834\",\"BinIdsByTick\":{\"0\":39,\"1\":0,\"2\":0,\"3\":0}},\"441\":{\"ReserveA\":\"0\",\"ReserveB\":\"1262544\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":65,\"1\":0,\"2\":0,\"3\":0}},\"442\":{\"ReserveA\":\"0\",\"ReserveB\":\"1249187\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":66,\"1\":0,\"2\":0,\"3\":0}},\"443\":{\"ReserveA\":\"0\",\"ReserveB\":\"1236390\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":67,\"1\":0,\"2\":0,\"3\":0}},\"444\":{\"ReserveA\":\"0\",\"ReserveB\":\"1223145\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":68,\"1\":0,\"2\":0,\"3\":0}},\"445\":{\"ReserveA\":\"0\",\"ReserveB\":\"1210695\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":69,\"1\":0,\"2\":0,\"3\":0}},\"446\":{\"ReserveA\":\"0\",\"ReserveB\":\"1198768\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":70,\"1\":0,\"2\":0,\"3\":0}},\"447\":{\"ReserveA\":\"0\",\"ReserveB\":\"1186012\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":101,\"1\":0,\"2\":0,\"3\":0}},\"448\":{\"ReserveA\":\"0\",\"ReserveB\":\"1173855\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":104,\"1\":0,\"2\":0,\"3\":0}},\"449\":{\"ReserveA\":\"0\",\"ReserveB\":\"1162291\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":105,\"1\":0,\"2\":0,\"3\":0}},\"450\":{\"ReserveA\":\"0\",\"ReserveB\":\"1150842\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":106,\"1\":0,\"2\":0,\"3\":0}},\"451\":{\"ReserveA\":\"0\",\"ReserveB\":\"1139505\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":107,\"1\":0,\"2\":0,\"3\":0}},\"452\":{\"ReserveA\":\"0\",\"ReserveB\":\"1128281\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":108,\"1\":0,\"2\":0,\"3\":0}},\"453\":{\"ReserveA\":\"0\",\"ReserveB\":\"1117166\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":109,\"1\":0,\"2\":0,\"3\":0}},\"454\":{\"ReserveA\":\"0\",\"ReserveB\":\"1106161\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":110,\"1\":0,\"2\":0,\"3\":0}},\"455\":{\"ReserveA\":\"0\",\"ReserveB\":\"1095265\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":111,\"1\":0,\"2\":0,\"3\":0}},\"456\":{\"ReserveA\":\"0\",\"ReserveB\":\"1084476\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":112,\"1\":0,\"2\":0,\"3\":0}},\"457\":{\"ReserveA\":\"0\",\"ReserveB\":\"1073793\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":113,\"1\":0,\"2\":0,\"3\":0}},\"458\":{\"ReserveA\":\"0\",\"ReserveB\":\"1063216\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":114,\"1\":0,\"2\":0,\"3\":0}},\"459\":{\"ReserveA\":\"0\",\"ReserveB\":\"1053587\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":92,\"1\":0,\"2\":0,\"3\":0}},\"460\":{\"ReserveA\":\"0\",\"ReserveB\":\"1042962\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":93,\"1\":0,\"2\":0,\"3\":0}},\"461\":{\"ReserveA\":\"0\",\"ReserveB\":\"1032104\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":115,\"1\":0,\"2\":0,\"3\":0}},\"462\":{\"ReserveA\":\"0\",\"ReserveB\":\"1021937\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":116,\"1\":0,\"2\":0,\"3\":0}},\"463\":{\"ReserveA\":\"0\",\"ReserveB\":\"1011870\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":117,\"1\":0,\"2\":0,\"3\":0}},\"464\":{\"ReserveA\":\"0\",\"ReserveB\":\"1001903\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":118,\"1\":0,\"2\":0,\"3\":0}},\"465\":{\"ReserveA\":\"0\",\"ReserveB\":\"992033\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":119,\"1\":0,\"2\":0,\"3\":0}},\"466\":{\"ReserveA\":\"0\",\"ReserveB\":\"982261\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":120,\"1\":0,\"2\":0,\"3\":0}},\"467\":{\"ReserveA\":\"0\",\"ReserveB\":\"972585\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":121,\"1\":0,\"2\":0,\"3\":0}},\"468\":{\"ReserveA\":\"0\",\"ReserveB\":\"963005\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":122,\"1\":0,\"2\":0,\"3\":0}},\"469\":{\"ReserveA\":\"0\",\"ReserveB\":\"953518\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":123,\"1\":0,\"2\":0,\"3\":0}},\"470\":{\"ReserveA\":\"0\",\"ReserveB\":\"944126\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":124,\"1\":0,\"2\":0,\"3\":0}},\"471\":{\"ReserveA\":\"0\",\"ReserveB\":\"934825\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":125,\"1\":0,\"2\":0,\"3\":0}},\"472\":{\"ReserveA\":\"0\",\"ReserveB\":\"925617\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":126,\"1\":0,\"2\":0,\"3\":0}},\"473\":{\"ReserveA\":\"0\",\"ReserveB\":\"916499\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":127,\"1\":0,\"2\":0,\"3\":0}},\"474\":{\"ReserveA\":\"0\",\"ReserveB\":\"907471\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":128,\"1\":0,\"2\":0,\"3\":0}},\"475\":{\"ReserveA\":\"0\",\"ReserveB\":\"898531\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":129,\"1\":0,\"2\":0,\"3\":0}},\"476\":{\"ReserveA\":\"0\",\"ReserveB\":\"889680\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":130,\"1\":0,\"2\":0,\"3\":0}},\"477\":{\"ReserveA\":\"0\",\"ReserveB\":\"880916\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":131,\"1\":0,\"2\":0,\"3\":0}},\"478\":{\"ReserveA\":\"0\",\"ReserveB\":\"872239\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":132,\"1\":0,\"2\":0,\"3\":0}},\"479\":{\"ReserveA\":\"0\",\"ReserveB\":\"863647\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":133,\"1\":0,\"2\":0,\"3\":0}},\"480\":{\"ReserveA\":\"0\",\"ReserveB\":\"855139\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":134,\"1\":0,\"2\":0,\"3\":0}},\"481\":{\"ReserveA\":\"0\",\"ReserveB\":\"846715\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":135,\"1\":0,\"2\":0,\"3\":0}},\"482\":{\"ReserveA\":\"0\",\"ReserveB\":\"838375\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":136,\"1\":0,\"2\":0,\"3\":0}},\"483\":{\"ReserveA\":\"0\",\"ReserveB\":\"830116\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":137,\"1\":0,\"2\":0,\"3\":0}},\"484\":{\"ReserveA\":\"0\",\"ReserveB\":\"821939\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":138,\"1\":0,\"2\":0,\"3\":0}},\"523\":{\"ReserveA\":\"0\",\"ReserveB\":\"558891\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":102,\"1\":0,\"2\":0,\"3\":0}},\"524\":{\"ReserveA\":\"0\",\"ReserveB\":\"553182\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":103,\"1\":0,\"2\":0,\"3\":0}},\"526\":{\"ReserveA\":\"0\",\"ReserveB\":\"542554\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":40,\"1\":0,\"2\":0,\"3\":0}},\"527\":{\"ReserveA\":\"0\",\"ReserveB\":\"537208\",\"TotalSupply\":\"100000000\",\"BinIdsByTick\":{\"0\":41,\"1\":0,\"2\":0,\"3\":0}}},\"activeTick\":407,\"lastTwaD8\":40700000435,\"timestamp\":1766655371}","staticExtra":"{\"tickSpacing\":198}","blockNumber":24095656}`

	var poolEntity entity.Pool

	err := json.Unmarshal([]byte(poolStr), &poolEntity)
	assert.NoError(t, err)

	sim, err := NewPoolSimulator(poolEntity)
	assert.NoError(t, err)

	amountIn := bignumber.NewBig("500000000")
	tokenIn := "0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48"
	tokenOut := "0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2"

	times := 20
	oneChunk := new(big.Int).Div(amountIn, big.NewInt(int64(times)))

	res, err := sim.CalcAmountOut(pool.CalcAmountOutParams{
		TokenAmountIn: pool.TokenAmount{
			Token:  tokenIn,
			Amount: amountIn,
		},
		TokenOut: tokenOut,
	})
	assert.NoError(t, err)
	swapTotalAmountOut := res.TokenAmountOut.Amount

	smallChunkAmountOut := new(big.Int)
	for range times {
		res, err := sim.CalcAmountOut(pool.CalcAmountOutParams{
			TokenAmountIn: pool.TokenAmount{
				Token:  tokenIn,
				Amount: oneChunk,
			},
			TokenOut: tokenOut,
		})
		assert.NoError(t, err)

		smallChunkAmountOut.Add(smallChunkAmountOut, res.TokenAmountOut.Amount)

		sim.UpdateBalance(pool.UpdateBalanceParams{
			TokenAmountIn: pool.TokenAmount{
				Token:  tokenIn,
				Amount: oneChunk,
			},
			TokenAmountOut: pool.TokenAmount{
				Token:  tokenOut,
				Amount: res.TokenAmountOut.Amount,
			},
			Fee:      *res.Fee,
			SwapInfo: res.SwapInfo,
		})
	}

	diff := new(big.Int).Sub(swapTotalAmountOut, smallChunkAmountOut)
	diff.Abs(diff)

	// Allow up to 1 basis point difference
	threshold := new(big.Int).Div(swapTotalAmountOut, big.NewInt(10000))
	assert.True(t, diff.Cmp(threshold) <= 0, "difference %s exceeds threshold %s", diff.String(), threshold.String())
}
