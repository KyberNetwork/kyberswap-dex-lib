env: "staging"
pprof: false
http:
  bindAddress: ":8080"
  mode: release #(debug,release,test)
  prefix: /avalanche
grpc:
  host: 0.0.0.0
  port: 10443
common:
  chainId: &chainId 43114
  chainName: &chainName avalanche
  rpc: "https://avalanche.knstats.com/v1/mainnet/geth?appId=prod-dmm-aggregator-backend"
  executorAddress: &executorAddress "0xd1B47490209CcB7A806E8a45d9479490C040ABf4"
  routerAddress: &routerAddress "0x6131B5fae19EA4f9D964eAc0408E4408b66337b5"
  gasTokenAddress: &gasTokenAddress "0xb31f66aa3c1e785363f0875a1b74e27b85fd66c7"
  whitelistedTokenSet: &whitelistedTokenSet
    0xb31f66aa3c1e785363f0875a1b74e27b85fd66c7: true # WAVAX
    0xc7198437980c041c805a1edcba50c1ce5db95118: true # USDT.e
    0xd586e7f844cea2f87f50152665bcbc2c279d8d70: true # DAI.e
    0xa7d7079b0fead91f3e65f86e8915cb59c1a4c664: true # USDC.e
    0x49d5c2bdffac6ce2bfdb6640f4f80f226bc10bab: true # WETH.e
    0x50b7545627a5162f82a992c33b87adc75187b218: true # WBTC.e
    0x130966628846bfd36ff31a822705796e8cb8c18d: true # MIM
    0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7: true # USDt
    0xb97ef9ef8734c71904d8002f8b6bc66dd9c48a6e: true # USDC
    0x39fc9e94caeacb435842fadedecb783589f50f5f: true # KNC
    0x111111111111ed1d73f860f57b2798b683f2d325: true # YUSD
    0x2b2c81e08f1af8835a78bb2a90ae924ace0ea4be: true # sAVAX
    0x3b55e45fd6bd7d4724f5c47e0d1bcaedd059263e: true # MAI
    0x63a72806098bd3d9520cc43356dd78afe5d386d9: true # AAVE.e
    0x5947bb275c521040051d82396192181b413227a3: true # LINK.e
  blacklistedPoolSet: &blacklistedPoolSet
    0xbe52548488992cc76ffa1b42f3a58f646864df45: true
    0x7f90122bf0700f9e7e1f688fe926940e8839f353: true
    0xd2acae14ae2ee0f6557ac6c6d0e407a92c36214b: true
  availableSources: &availableSources
    - "kyberswap"
    - "kyberswap-static"
    - "kyberswap-elastic"
    - "iron-stable"
    - "pangolin"
    - "traderjoe"
    #- "traderjoe-v20"
    #- "traderjoe-v21"
    - "curve"
    - "synapse"
    - "axial"
    - "lydia"
    - "yetiswap"
    - "dodo"
    - "sushiswap"
    - "platypus"
    - "gmx"
    - "fraxswap"
    - "kyberswap-limit-order"
    - "sushiswap-v3"
    - "balancer"
    - "balancer-composable-stable"
  featureFlags: &featureFlags
log:
  sentryDSN: "https://6cd398671bde455f8fadad6dbfe87a67@sentry-v2.knstats.com/48"
  consoleLevel: info
  enableConsole: true
  enableJSONFormat: true
redis:
  addresses:
  masterName: ""
  dbNumber: 0
  password: ""
  prefix: *chainName
  readTimeout: 3s
  writeTimeout: 3s
  readOnly: false
  routeRandomly: false
poolRedis:
  addresses:
  masterName: ""
  dbNumber: 0
  password: ""
  prefix: *chainName
  readTimeout: 3s
  writeTimeout: 3s
  readOnly: false
  routeRandomly: false
ddAgentHost: ""
enableGRPC: false
keyPair:
  storageFilePath: ""
  keyIDForSealingData:
    clientData: "1"
reloadConfig:
  httpUrl: ""
  interval: 10s
  serviceName: "aggregator"
  chainID: *chainId
secretKey:
metrics:
  host:
  port: 8125
  namespace: "kybernetwork."
encoder:
  chainId: *chainId
  executorAddress: *executorAddress
  routerAddress: *routerAddress
  kyberLOAddress:
  isPositiveSlippageEnabled: true
  minimumPSThreshold: 1000000
useCase:
  getRoute:
    chainId: *chainId
    gasTokenAddress: *gasTokenAddress
    routerAddress: *routerAddress
    availableSources: *availableSources
    ammAggregator:
      whitelistedTokenSet: *whitelistedTokenSet
      getBestPoolsOptions:
        directPoolsCount: 100
        whitelistPoolsCount: 500
        tokenInPoolsCount: 200
        tokenOutPoolCount: 200
        amplifiedTvlDirectPoolsCount: 50
        amplifiedTvlWhitelistPoolsCount: 200
        amplifiedTvlTokenInPoolsCount: 100
        amplifiedTvlTokenOutPoolCount: 100
      finderOptions:
        maxHops: 3
        distributionPercent: 5
        maxPathsInRoute: 20
        maxPathsToGenerate: 5
        maxPathsToReturn: 200
        minPartUSD: 500
        minThresholdAmountInUSD: 0
        maxThresholdAmountInUSD: 100000000
    cache:
      defaultTtl: 15s
      ttlByAmount:
        - amount: 1
          ttl: 30s
        - amount: 2
          ttl: 10s
        - amount: 5
          ttl: 10s
        - amount: 10
          ttl: 10s
        - amount: 11
          ttl: 30s
        - amount: 15
          ttl: 10s
        - amount: 20
          ttl: 10s
        - amount: 22
          ttl: 30s
        - amount: 25
          ttl: 10s
        - amount: 30
          ttl: 10s
        - amount: 33
          ttl: 30s
        - amount: 35
          ttl: 10s
        - amount: 40
          ttl: 10s
        - amount: 44
          ttl: 30s
        - amount: 45
          ttl: 10s
        - amount: 50
          ttl: 10s
        - amount: 55
          ttl: 30s
        - amount: 60
          ttl: 10s
        - amount: 66
          ttl: 30s
        - amount: 70
          ttl: 10s
        - amount: 77
          ttl: 30s
        - amount: 80
          ttl: 10s
        - amount: 88
          ttl: 30s
        - amount: 90
          ttl: 10s
        - amount: 99
          ttl: 30s
        - amount: 100
          ttl: 10s
        - amount: 500
          ttl: 10s
        - amount: 1000
          ttl: 10s
        - amount: 10000
          ttl: 10s
        - amount: 100000
          ttl: 10s
      ttlByAmountUsdRange:
        - amountUSDLowerBound: 0
          ttl: 10s
        - amountUSDLowerBound: 101
          ttl: 10s
        - amountUSDLowerBound: 500
          ttl: 10s
        - amountUSDLowerBound: 1001
          ttl: 10s
        - amountUSDLowerBound: 2000
          ttl: 10s
        - amountUSDLowerBound: 5000
          ttl: 10s
        - amountUSDLowerBound: 10000
          ttl: 10s
      priceImpactThreshold: 0.005
      shrinkFuncName: "round"
      shrinkDecimalBase: 10
      shrinkFuncPowExp: 0.7
      shrinkFuncLogPercent: 1.01
  buildRoute:
    chainId: *chainId
  poolFactory:
    chainId: *chainId
  poolManager:
    blacklistedPoolSet: *blacklistedPoolSet
    capacity: 1000000
    poolRenewalInterval: 3s
  indexPools:
    whitelistedTokenSet: *whitelistedTokenSet
    chunkSize: 3000
job:
  indexPools:
    interval: 2s
  updateSuggestedGasPrice:
    interval: 2s
repository:
  gas:
    redis:
      prefix: *chainName
  pool:
    redis:
      prefix: *chainName
  price:
    redis:
      prefix: *chainName
    ristretto:
      numCounters: 10000
      maxCost: 1000
      bufferItems: 64
      price:
        cost: 1
        ttl: 1m
  token:
    redis:
      prefix: *chainName
    goCache:
      expiration: -1
      cleanupInterval: -1
  poolRank:
    redis:
      prefix: *chainName
  route:
    redisCache:
      prefix: *chainName
      localCacheSize: 5000
      localCacheTtl: 30s
validator:
  buildRouteParams:
    slippageToleranceGte: 0
    slippageToleranceLte: 5000
    blacklistedRecipientSet:
  getRouteEncodeParams:
    slippageToleranceGte: 0
    slippageToleranceLte: 5000
    blacklistedRecipientSet:
aevmEnabled: false
aevm:
  # 192.168.8.3 is the AEVM-enabled Avalanche node which is reachable from router-service cluster
  serverUrl: "192.168.8.3:8246"
  rpc: "http://192.168.8.3:9650/ext/bc/C/rpc"
  simulationWallet: "0x47f3c2557364efc28f1269e3169773fa5236384d"
